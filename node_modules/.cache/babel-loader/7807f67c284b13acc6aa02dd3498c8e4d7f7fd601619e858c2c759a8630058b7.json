{"ast":null,"code":"import _regeneratorRuntime from\"D:/Coding/Desktop/Hackathon/phone_otp_verification_react_firebase/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Coding/Desktop/Hackathon/phone_otp_verification_react_firebase/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Coding/Desktop/Hackathon/phone_otp_verification_react_firebase/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{BsFillShieldLockFill,BsTelephoneFill}from\"react-icons/bs\";import{CgSpinner}from\"react-icons/cg\";import OtpInput from\"otp-input-react\";import{useState}from\"react\";import PhoneInput from\"react-phone-input-2\";import{auth}from\"./firebase.config\";import{RecaptchaVerifier,signInWithPhoneNumber}from\"firebase/auth\";import{toast,Toaster}from\"react-hot-toast\";import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),otp=_useState2[0],setOtp=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),ph=_useState4[0],setPh=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showOTP=_useState8[0],setShowOTP=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),user=_useState10[0],setUser=_useState10[1];function onCaptchVerify(){if(!window.recaptchaVerifier){window.recaptchaVerifier=new RecaptchaVerifier(\"recaptcha-container\",{size:\"invisible\",callback:function callback(response){onSignup();},\"expired-callback\":function expiredCallback(){}},auth);}}function onSignup(){setLoading(true);onCaptchVerify();var appVerifier=window.recaptchaVerifier;var formatPh=\"+\"+ph;signInWithPhoneNumber(auth,formatPh,appVerifier).then(function(confirmationResult){window.confirmationResult=confirmationResult;setLoading(false);setShowOTP(true);toast.success(\"OTP Sent successfully!\");}).catch(function(error){console.log(error);setLoading(false);});}function onOTPVerify(){setLoading(true);window.confirmationResult.confirm(otp).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(res);setUser(res.user);setLoading(false);case 3:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){console.log(err);setLoading(false);});}return/*#__PURE__*/_jsx(\"section\",{className:\"main-container\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Toaster,{toastOptions:{duration:4000}}),/*#__PURE__*/_jsx(\"div\",{id:\"recaptcha-container\"}),user?/*#__PURE__*/_jsxs(\"pre\",{className:\"login-success\",children:[\"Login Success\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"Welcome to Brainy Bunch Home Page\"]}):/*#__PURE__*/_jsxs(\"div\",{id:\"login-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"welcome-heading\",children:\"Brainy Bunch's Authentication System\"}),showOTP?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"phone-logo-container\",children:/*#__PURE__*/_jsx(BsFillShieldLockFill,{color:\"white\",size:50})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"otp\",className:\"welcome-heading\",id:\"otp-heading\",children:\"Enter your OTP\"}),/*#__PURE__*/_jsx(OtpInput,{value:otp,onChange:setOtp,OTPLength:6,otpType:\"number\",disabled:false,autoFocus:true,inputStyle:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",width:\"40%\",height:\"50px\",borderRadius:\"10px\",border:\"1px solid #000\",margin:\"0 auto\"},className:\"opt-container \"}),/*#__PURE__*/_jsxs(\"button\",{onClick:onOTPVerify,id:\"verifyOTP\",children:[loading&&/*#__PURE__*/_jsx(CgSpinner,{size:20,className:\"mt-1 animate-spin\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Verify OTP\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"telephone-container\",children:/*#__PURE__*/_jsx(BsTelephoneFill,{size:30})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",id:\"login-heading\",children:\"Log In With Phone\"}),/*#__PURE__*/_jsx(PhoneInput,{inputStyle:{width:\"200px\",padding:\"10px\",height:\"2.5rem\",border:\"none\",borderRadius:\"10px\"},id:\"phoneInput\",country:\"in\",value:ph,onChange:setPh}),/*#__PURE__*/_jsxs(\"button\",{onClick:onSignup,id:\"sendOTP\",children:[loading&&/*#__PURE__*/_jsx(CgSpinner,{size:20,className:\"spinner\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Send code via SMS\"})]})]})]})]})});};export default App;","map":{"version":3,"names":["BsFillShieldLockFill","BsTelephoneFill","CgSpinner","OtpInput","useState","PhoneInput","auth","RecaptchaVerifier","signInWithPhoneNumber","toast","Toaster","App","otp","setOtp","ph","setPh","loading","setLoading","showOTP","setShowOTP","user","setUser","onCaptchVerify","window","recaptchaVerifier","size","callback","response","onSignup","appVerifier","formatPh","then","confirmationResult","success","catch","error","console","log","onOTPVerify","confirm","res","err","duration","display","justifyContent","alignItems","width","height","borderRadius","border","margin","padding"],"sources":["D:/Coding/Desktop/Hackathon/phone_otp_verification_react_firebase/src/App.js"],"sourcesContent":["import { BsFillShieldLockFill, BsTelephoneFill } from \"react-icons/bs\";\r\nimport { CgSpinner } from \"react-icons/cg\";\r\nimport OtpInput from \"otp-input-react\";\r\nimport { useState } from \"react\";\r\nimport PhoneInput from \"react-phone-input-2\";\r\nimport { auth } from \"./firebase.config\";\r\nimport { RecaptchaVerifier, signInWithPhoneNumber } from \"firebase/auth\";\r\nimport { toast, Toaster } from \"react-hot-toast\";\r\nimport './index.css'\r\nconst App = () => {\r\n  const [otp, setOtp] = useState(\"\");\r\n  const [ph, setPh] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [showOTP, setShowOTP] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n\r\n  function onCaptchVerify() {\r\n    if (!window.recaptchaVerifier) {\r\n      window.recaptchaVerifier = new RecaptchaVerifier(\r\n        \"recaptcha-container\",\r\n        {\r\n          size: \"invisible\",\r\n          callback: (response) => {\r\n            onSignup();\r\n          },\r\n          \"expired-callback\": () => {},\r\n        },\r\n        auth\r\n      );\r\n    }\r\n  }\r\n\r\n  function onSignup() {\r\n    setLoading(true);\r\n    onCaptchVerify();\r\n\r\n    const appVerifier = window.recaptchaVerifier;\r\n\r\n    const formatPh = \"+\" + ph;\r\n\r\n    signInWithPhoneNumber(auth, formatPh, appVerifier)\r\n      .then((confirmationResult) => {\r\n        window.confirmationResult = confirmationResult;\r\n        setLoading(false);\r\n        setShowOTP(true);\r\n        toast.success(\"OTP Sent successfully!\");\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setLoading(false);\r\n      });\r\n  }\r\n\r\n  function onOTPVerify() {\r\n    setLoading(true);\r\n    window.confirmationResult\r\n      .confirm(otp)\r\n      .then(async (res) => {\r\n        console.log(res);\r\n        setUser(res.user);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <section className=\"main-container\">\r\n      <div>\r\n        <Toaster toastOptions={{ duration: 4000 }} />\r\n        <div id=\"recaptcha-container\"></div>\r\n        {user ? (\r\n          <pre className=\"login-success\">\r\n           Login Success\r\n            <br />\r\n            <br/>\r\n           Welcome to Brainy Bunch Home Page\r\n          </pre>\r\n        ) : (\r\n          <div id=\"login-container\">\r\n            <h1 className=\"welcome-heading\">\r\n           Brainy Bunch's Authentication System\r\n            </h1>\r\n            {showOTP ? (\r\n              <>\r\n                <div className=\"phone-logo-container\">\r\n                  <BsFillShieldLockFill color=\"white\" size={50} />\r\n                </div>\r\n                <label\r\n                  htmlFor=\"otp\"\r\n                  className=\"welcome-heading\"\r\n                  id=\"otp-heading\"\r\n                >\r\n                  Enter your OTP\r\n                </label>\r\n                <OtpInput\r\n                  value={otp}\r\n                  onChange={setOtp}\r\n                  OTPLength={6}\r\n                  otpType=\"number\"\r\n                  disabled={false}\r\n                  autoFocus\r\n                  inputStyle={{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",width:\"40%\",height:\"50px\",borderRadius:\"10px\",border:\"1px solid #000\",margin:\"0 auto\"}}\r\n                  className=\"opt-container \"\r\n                ></OtpInput>\r\n                <button\r\n                  onClick={onOTPVerify}\r\n               id=\"verifyOTP\"\r\n                >\r\n                  {loading && (\r\n                    <CgSpinner size={20} className=\"mt-1 animate-spin\" />\r\n                  )}\r\n                  <span>Verify OTP</span>\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <div \r\n                id=\"telephone-container\">\r\n                  <BsTelephoneFill size={30} />\r\n                </div>\r\n                <label\r\n                  htmlFor=\"\"\r\n             \r\n                  id=\"login-heading\"\r\n                >\r\n                  Log In With Phone\r\n                </label>\r\n                <PhoneInput inputStyle={{width:\"200px\",padding:\"10px\", height:\"2.5rem\", border:\"none\",borderRadius:\"10px\"}} id=\"phoneInput\" country={\"in\"} value={ph} onChange={setPh} />\r\n                <button\r\n                  onClick={onSignup}\r\n                  id=\"sendOTP\"\r\n                >\r\n                  {loading && (\r\n                    <CgSpinner size={20} className=\"spinner\" />\r\n                  )}\r\n                  <span>Send code via SMS</span>\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}